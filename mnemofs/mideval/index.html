<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Google Summer of Code &#x27;24 @ Apache NuttX, Mid-Term Evaluation Blog</title><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-HFNGDFK1PN"></script><script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag(&#x27;js&#x27;, new Date());

        gtag(&#x27;config&#x27;, &#x27;G-HFNGDFK1PN&#x27;);
        </script><meta name="next-head-count" content="5"/><link rel="preload" href="/blogs/_next/static/css/a0de50ea0cc40a66.css" as="style"/><link rel="stylesheet" href="/blogs/_next/static/css/a0de50ea0cc40a66.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blogs/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/blogs/_next/static/chunks/webpack-b7c95b972d7a52a1.js" defer=""></script><script src="/blogs/_next/static/chunks/framework-a85322f027b40e20.js" defer=""></script><script src="/blogs/_next/static/chunks/main-25a9149b204a716f.js" defer=""></script><script src="/blogs/_next/static/chunks/pages/_app-ae69650375182de2.js" defer=""></script><script src="/blogs/_next/static/chunks/253-8360a865f593540b.js" defer=""></script><script src="/blogs/_next/static/chunks/pages/mnemofs/mideval-a773fc7c38a03d29.js" defer=""></script><script src="/blogs/_next/static/xvVXqBqMjgQ6d2AA5_Hv1/_buildManifest.js" defer=""></script><script src="/blogs/_next/static/xvVXqBqMjgQ6d2AA5_Hv1/_ssgManifest.js" defer=""></script></head><body><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><article class="nx-container nx-prose max-md:nx-prose-sm dark:nx-prose-dark" dir="ltr"><h1>Google Summer of Code &#x27;24 @ Apache NuttX, Mid-Term Evaluation Blog</h1><div class="nx-mb-8 nx-flex nx-gap-3 nx-items-center"><div class="nx-grow dark:nx-text-gray-400 nx-text-gray-600"><div class="nx-not-prose nx-flex nx-flex-wrap nx-items-center nx-gap-1"></div></div><div class="nx-flex nx-items-center nx-gap-3 print:nx-hidden"></div></div><div style="text-align:justify"><p>Hi! I am Saurav Pal, a recent graduate, and a regular passionate developer interested in systems and anything low-level. I welcome you to my blog, which covers my contributions and journey as a Google Summer of Code (GSoC) Contributor for Apache NuttX in 2024, from the very start to the end. My project involves designing and implementing mnemofs, a NAND Flash File System for Apache NuttX.</p><h2 class="nx-not-prose subheading-h2">My Contributions<a href="#my-contributions" id="my-contributions" class="subheading-anchor" aria-label="Permalink for this section"></a></h2><p>From before the start of GSoC till the midterm evaluation, I have made a few contributions to NuttX. Keeping the unrelated ones for later, here&#x27;s my work on mnemofs:</p><ul>
<li><a href="https://github.com/apache/nuttx/pull/11806" target="_blank" rel="noreferrer">(<code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">#11806</code>) Virtual NAND Flash device for the NuttX Simulator<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a></li>
<li><a href="https://github.com/apache/nuttx/pull/12658" target="_blank" rel="noreferrer">(<code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">#12658</code>) Mnemofs setup and VFS methods<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a></li>
<li><a href="https://github.com/apache/nuttx/pull/12661" target="_blank" rel="noreferrer">(<code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">#12661</code>) Mnemofs Block Allocator<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a></li>
<li><a href="https://github.com/apache/nuttx/pull/12668" target="_blank" rel="noreferrer">(<code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">#12668</code>) Mnemofs parent iterator and path methods<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a></li>
<li><a href="https://github.com/apache/nuttx/pull/12680" target="_blank" rel="noreferrer">(<code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">#12680</code>) Mnemofs LRU and related CTZ methods<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a></li>
<li><a href="https://github.com/apache/nuttx/pull/12683" target="_blank" rel="noreferrer">(<code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">#12683</code>) Mnemofs Journal<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a></li>
<li><a href="https://github.com/apache/nuttx/pull/12702" target="_blank" rel="noreferrer">(<code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">#12702</code>) Mnemofs Master Node<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a></li>
</ul><p>The file system is in a basic testable state, however, it&#x27;s riddled with many bugs that need to be solved. The file system needs to undergo thorough testing to ensure it&#x27;s reliable.</p><h2 class="nx-not-prose subheading-h2">Components<a href="#components" id="components" class="subheading-anchor" aria-label="Permalink for this section"></a></h2><p>The files for mnemofs code have these meanings:</p><ul>
<li><code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">mnemofs.c</code>: Entry point to the FS. All the implementations of Virtual File System (VFS) methods are in this file.</li>
<li><code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">mnemofs_blkalloc.c</code>: Contains Block Allocator. Provides a block or page when needed, also marks used pages, and is responsible for erasing a block when all pages in a block want to be erased.</li>
<li><code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">mnemofs_fsobj.c</code>: This contains FS Object methods, i.e. path and parent iterator methods to the VFS methods. This abstracts away the file and directory structure in the flash and the management of on-flash data and updation of that with the LRU updates. These interact only with the LRU, which also provides wrappers for underlying methods.</li>
<li><code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">mnemofs_lru.c</code>: Contains the LRU. This stores updates to a file or directory and bunches up the updates to apply batches of updates in one go, to reduce the number of writes to the flash, or allocations of blocks or pages. This helps in reducing the wear. A higher chance of power loss should be accompanied by a lower configured LRU size. The LRU stays in the memory and interacts with the flash through the CTZ methods. This provides a wrapper over CTZ methods as well, to make it simpler for FS objects to get data with LRU updates applied.</li>
<li><code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">mnemofs_ctz.c</code>: Contains CTZ methods. These are used to directly write/read CTZ information to/from the flash. This lies as a wrapper over the journal and will update, or be updated from the journal. These abstract away the data portion of the CTZ skip list, and don&#x27;t let the caller worry about the pointers, and instead treat the data portion across blocks (of varying sizes) as a single unit that can be used with an offset from the start. The journal should not be accessed directly, but instead through this.</li>
<li><code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">mnemofs_journal.c</code>: Contains the Journal. This contains a lot of logs in a sequential manner. Each log contains a path of the old file in the form of an array of CTZ list information of all the FS objects in the path and the new CTZ list information, and this is appended by a checksum of the log.</li>
<li><code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">mnemofs_rw.c</code>: Contains the raw read, write, erase, check bad block, and mark bad block methods. These will only be used by the CTZ methods and the journal. These are very simple and are almost just a wrapper over the underlying device driver&#x27;s exposed methods.</li>
</ul><p>A detailed blog on the various components can be found <a href="/blogs/mnemofs/mnemofs/">here</a>.</p><h2 class="nx-not-prose subheading-h2">Key Decisions<a href="#key-decisions" id="key-decisions" class="subheading-anchor" aria-label="Permalink for this section"></a></h2><p>Some decisions make the implementation differ from the initial design of mnemofs:</p><ul>
<li>
<p><strong>Journal</strong>: The journal was initially meant to serve as a circular singly linked list. This would be problematic for a lot of reasons. This would mean that every block would contain the page number, most logically at the very end or the start. Journal blocks are allocated at the start, during the binding phase of a file system. As you can only write to a page once (before erasing), it means that the block numbers have to be written somewhere right at the start. The block numbers are 4 bytes in length, compared to a usual minimum of 512 byte page length. Thus, an entire page per block would be waster for this. So, it was decided that there would be an entire array containing the block numbers in the journal, and it would be preceded by a count of the number of blocks. Since it&#x27;s a block that has a large size, it&#x27;s assumed that the array will not extend past a single block. If the array ends in the middle of a page, the rest of the page is left unutilized. Thus, we waste a maximum of slightly less than 1 page worth of storage, compared to the <code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">number of blocks</code> worth of pages.</p>
</li>
<li>
<p><strong>LRU</strong>: The LRU earlier contained a generic interfacing of exchanging <code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">x</code> bytes with <code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">y</code> bytes. However, applying these commits to an array becomes a nightmare with limited memory usage. Thus, it was narrowed down to two cases... <code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">x</code> bytes replaced with <code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">x</code> bytes in the updated file (unless it&#x27;s the end of the file), or <code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">x</code> bytes replaced with <code class="nx-border-black nx-border-opacity-[0.04] nx-bg-opacity-[0.03] nx-bg-black nx-break-words nx-rounded-md nx-border nx-py-0.5 nx-px-[.25em] nx-text-[.9em] dark:nx-border-white/10 dark:nx-bg-white/10" dir="ltr">0</code> bytes in the updated file. This made the entire process much simpler, reducing it to be solved with a simple 2-pointer approach.</p>
</li>
<li>
<p><strong>Wrapper Approach</strong>: Almost everything is a wrapper to another layer of methods, even in situations where it simply just calls the corresponding underlying method itself. This was done to reduce cases where one function would, say, update location from the Journal, but one would not, and you need to keep that in your mind, or make mistakes. Here, uniformity helps clear doubts.</p>
</li>
</ul><h2 class="nx-not-prose subheading-h2">My Journey<a href="#my-journey" id="my-journey" class="subheading-anchor" aria-label="Permalink for this section"></a></h2><div class="nextra-callout nx-overflow-x-auto nx-mt-6 nx-flex nx-rounded-lg nx-border nx-py-2 ltr:nx-pr-4 rtl:nx-pl-4 contrast-more:nx-border-current contrast-more:dark:nx-border-current nx-border-yellow-100 nx-bg-yellow-50 nx-text-yellow-900 dark:nx-border-yellow-200/30 dark:nx-bg-yellow-700/30 dark:nx-text-yellow-200"><div class="nx-select-none nx-text-xl ltr:nx-pl-3 ltr:nx-pr-2 rtl:nx-pr-3 rtl:nx-pl-2" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;">ℹ️</div><div class="nx-w-full nx-min-w-0 nx-leading-7"><p>Disclaimer: Contains a lot of rants and yapping.</p></div></div><h3 class="nx-not-prose subheading-h3">Pre-GSoC<a href="#pre-gsoc" id="pre-gsoc" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><h4 class="nx-not-prose subheading-h4">Pre-Apache NuttX Period<a href="#pre-apache-nuttx-period" id="pre-apache-nuttx-period" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p>Before the GSoC period, I was looking into Linux, trying to get started as a contributor. But first, I needed to have a fair understanding of how the whole thing works. Baby steps, you know. Read the famous <a href="http://www.doc-developpement-durable.org/file/Projets-informatiques/cours-&amp;-manuels-informatiques/Linux/Linux%20Kernel%20Development,%203rd%20Edition.pdf" target="_blank" rel="noreferrer">Robert Love&#x27;s book<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a>, saw a lot of videos, and of course, tried to read the codebase.</p><p>It was overwhelming, and it was stressful, because... I mean, just look at Linux&#x27;s codebase <strong>and</strong> its history. I was also interested in embedded systems, but I was trying to do one thing at a time. While I was going through the codebase, I was hooked on to the history of file systems in the codebase. You could see new file systems appear and some old ones disappear every few versions. Over that, I had heard file systems are the lowest in the whole tree, and are kind of only dependent on the Virtual File System and whatever the storage driver is, and that too that file system developers do not need to worry too much about the storage device (as long as it&#x27;s of the same technology, but I didn&#x27;t know this then), or the internals of the OS.</p><p>So, I felt file systems would be a great starting point. Started reading the codebases of the various file systems. After 3-4 file systems, all of them seemed to swim in front of my eyes and feel the same, and concepts from one FS seemed to merge with concepts from another FS 🫠. Still, carried on, as I knew if I tried to read it repeatedly, it would start making sense someday. Every line of C makes sense, as mostly nothing is hidden away, and more so in the case of OS codebases. If it were a higher level language, I would have just probably given up, idk.</p><p>I wanted to apply for GSoC once again for 2024, and this time, for a large project (I had done a <a href="https://summerofcode.withgoogle.com/archive/2023/projects/Djrl5w5B" target="_blank" rel="noreferrer">medium project for PostgreSQL in 2023<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a>). Around this time, I thought of looking into any OS-related projects that are available, as those align with my interests. Found Apache NuttX. What does NuttX and the project I found have in common with my interests? Everything! File System + Operating System + Embedded Systems. All my boxes ticked, and a match made in heaven, at least from my side 😉.</p><h4 class="nx-not-prose subheading-h4">First PR<a href="#first-pr" id="first-pr" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p>So, I decided to look into Apache NuttX and try to understand it. I tried looking into good first issues, but honestly, I was just too optimistic at that point and even the scant few first issues were very advanced for the past me. I could successfully set up NuttX, and build the simulator configuration (I did not have <strong>any</strong> embedded boards available, but more on that later).</p><p>I did not wish for hand-holding, as it&#x27;s often detrimental to the learning process, but I did wish for a nudge in the right direction. And so I contacted <a href="https://github.com/acassis" target="_blank" rel="noreferrer">Alan<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a> who was listed as a mentor to the project on any kind of resources I could gather. He very generously provided some resources and suggested I should look into existing FS codebases (like I had done in Linux).</p><p>The difference between Linux and NuttX codebases? NuttX codebase looks beautiful. Sure, Linux might look beautiful to the experts, but NuttX looks good even to newbies like me. A lot of the code is properly documented...each function, what it does, and even sometimes, why it exists.</p><p>I looked at the <a href="https://github.com/apache/nuttx/tree/master/fs/fat" target="_blank" rel="noreferrer">FAT file system code<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a>. In and of itself, the code isn&#x27;t too complicated. But NuttX&#x27;s contribution style made a lot of things clear to someone like me who was mostly stumbling around in the dark, trying to make sense of my surroundings. Finally, while reading the codebase, I came <a href="https://github.com/apache/nuttx/pull/11647" target="_blank" rel="noreferrer">across a bug<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a> that initially I thought was something that I couldn&#x27;t understand the meaning of. After asking around on the mailing list, I found out that this bug went unnoticed because the particular way the macro was used in the codebase till then made the expansion correct, even if the macro itself was incorrect, and might cause problems if the usage of the macro was modified. So, I patched it, and made my first <a href="https://github.com/apache/nuttx/pull/11647" target="_blank" rel="noreferrer">Apache NuttX PR<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a>!</p><h4 class="nx-not-prose subheading-h4">More contributions<a href="#more-contributions" id="more-contributions" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p>Alan had mentioned that the FAT file system documentation was a bit lacking and so since I was already looking at the file system, writing it down somewhere would be a good idea, and why not the official documentation :D. So, I researched FAT FS (or, rather VFAT), and alongside reading the code, I wrote down whatever I learned, and finally updated the documentation in my <a href="https://github.com/apache/nuttx/pull/11656" target="_blank" rel="noreferrer">second PR<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a>.</p><p>Now I wanted to move higher in the OS tree. So, I thought about learning about the VFS. Since this VFS shares a lot with Linux&#x27;s structure, I could apply the VFS resources for Linux here. Along with this, I looked into the codebase and learned more about the VFS. Of course, not all of it, but a lot of it. I updated the documentation for the VFS as my <a href="https://github.com/apache/nuttx/pull/11730" target="_blank" rel="noreferrer">third PR<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a>.</p><h3 class="nx-not-prose subheading-h3">GSoC Community Bonding Period<a href="#gsoc-community-bonding-period" id="gsoc-community-bonding-period" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>This was the community bonding period. Asking questions, talking with the mentor, getting comfortable, exploring the solution proposed, and its feasibility, and exploring any improvements, and not to forget, setting up everything.</p><h4 class="nx-not-prose subheading-h4">NAND Flashes<a href="#nand-flashes" id="nand-flashes" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p>I had an STM32F401 board, but the trouble with it stemmed from the fact that its headers were not soldered. It was quite a trouble getting them soldered, but I had it ready around this time. I had ordered this before my interactions with the NuttX community and Alan, and it was just a buy-whatever-feels-popular-and-cheap. Surprise! It doesn&#x27;t have a JTAG programmer, and I need to buy one. Another infinite waiting period for that to get delivered to my remote campus.</p><p>I was sick of this wait and wanted to learn about NAND flashes, and thus, about drivers in NuttX. So my thought process went like this: &quot;I am already using the simulator. Why not simulate NAND Flash in it? I have already seen QEMU simulate chips. If CPUs, why not peripherals.&quot; And so, after some headache-filled days, I made my fourth set of PRs (<a href="https://github.com/apache/nuttx/pull/11806" target="_blank" rel="noreferrer">this<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a> and <a href="https://github.com/apache/nuttx-apps/pull/2319" target="_blank" rel="noreferrer">this<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a>) to add a NAND Flash virtual device as an app in the simulator.</p><p>This made me learn about both NAND Flashes, as well as a lot of insight into drivers&#x27; work in NuttX. Both are very critical for my understanding if I am to develop a file system for NuttX.</p><h4 class="nx-not-prose subheading-h4">Setting up NuttX on my board<a href="#setting-up-nuttx-on-my-board" id="setting-up-nuttx-on-my-board" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p>So, I came back from my campus, to my home, at this time. I have the JTAG programmer and an STM32F401 board. I tried flashing NuttX in it. The LED kept blinking, and Alan said it was because it was crashing (and restarting continuously). It was very weird, because the same NuttX configuration worked for his board, but not mine, which were both STM32F401 boards. To this day, it&#x27;s a mystery, but it&#x27;s probably because it&#x27;s a locally produced cheap copy of the board in my case. Over that, I didn&#x27;t have a USB-Serial Adapter, so needed to buy one as well.</p><p>So I got my hands on another board, an STM32F103. This time it was a no-go either. After much looking around, Alan pointed out a frequent issue of the wrong R10 pull-up resistor. While a solution can be found <a href="http://amitesh-singh.github.io/stm32/2017/05/27/Overcoming-wrong-pullup-in-blue-pill.html" target="_blank" rel="noreferrer">here<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a>, I could not <em>modify</em> the board as I was just borrowing it.</p><p>So, I bought an <a href="https://circuitstate.com/wp-content/uploads/2022/12/ESP32-DevKit-V1-Pinout-Diagram-r0.1-CIRCUITSTATE-Electronics-2.png" target="_blank" rel="noreferrer">ESP32-DevKit-V1<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a>, and while it&#x27;s probably a local copy as well, it works with NuttX.</p><h4 class="nx-not-prose subheading-h4">NAND Flash<a href="#nand-flash" id="nand-flash" class="subheading-anchor" aria-label="Permalink for this section"></a></h4><p>Acquiring the NAND flash was a difficult task. None were locally available. Absolutely none. The scant few online were of WSON8 type, which would be hard for me to solder, but they also were of a different voltage specification. I had to import them and bought a W25N from Mouser. Import duty in India is hell, and it cost me 3 times the actual cost of the components.</p><p>Now, soldering this one was problematic as well. My jumper wires would not have solder stuck to them, nor did I have a breakout board that could fit it. So, I had to improvise. Since the desoldering wick contains copper, which is conductive, I broke a small part of it into 8 small wires (only 8 are required for connection) and then soldered them onto the NAND chip, from these wires, I attached the jumper wires by soldering them to these copper bits.</p><p>Behold Spider NAND :D.</p><p><img src="https://res.cloudinary.com/dbzi2yvvc/image/upload/v1720848400/mnemofs/Screenshot_20240713_105534_ixb8vb.png" alt="nand"/></p><h3 class="nx-not-prose subheading-h3">Till Mid-Term Evaluation<a href="#till-mid-term-evaluation" id="till-mid-term-evaluation" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>Till the mid-term evaluation, my PR spree had come to a hiatus. This is because it&#x27;s very tough to test individual parts of the file system. Almost everything is interdependent, and thus testing one without completing the other gains no knowledge about how it will behave together. Thus, the file system had to be written first. The entirety of it. At least, to a working state.</p><p>Thus, that&#x27;s what I did. Wrote it down all.</p><p>Then, split it into <a href="/blogs/mnemofs/mideval/#my-contributions">multiple PRs</a>.</p><h3 class="nx-not-prose subheading-h3">Apache Workshop<a href="#apache-workshop" id="apache-workshop" class="subheading-anchor" aria-label="Permalink for this section"></a></h3><p>I participated in Apache NuttX International Workshop 2024 as a speaker, talking about my project, and it was amazing. So many opinions, and amazing projects related to NuttX, it was amazing to see them.</p><p><img src="https://res.cloudinary.com/dbzi2yvvc/image/upload/v1720848878/mnemofs/NuttX_badge_kvzjw2.png" alt="badge"/></p><h2 class="nx-not-prose subheading-h2">Mid-Term Evaluation Result<a href="#mid-term-evaluation-result" id="mid-term-evaluation-result" class="subheading-anchor" aria-label="Permalink for this section"></a></h2><p>Passed :D.</p><h2 class="nx-not-prose subheading-h2">Acknowledgement<a href="#acknowledgement" id="acknowledgement" class="subheading-anchor" aria-label="Permalink for this section"></a></h2><p>First up, a thank you to my parents. Words can never be enough for this, and I can never thank them enough for this.</p><p>Next, a big thank you to Alan, who&#x27;s my mentor. Spending so much time patiently mentoring and encouraging me, even after multiple blunders along the path...couldn&#x27;t have asked for more. I have gained a new perspective on a lot of open-source-related things due to the various talks and exposure.</p><p>Also, a big thank you to <a href="https://github.com/lupyuen" target="_blank" rel="noreferrer">Lup<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a> and <a href="https://github.com/xiaoxiang781216" target="_blank" rel="noreferrer">Xiang<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a> who have helped me whenever I approached them with my doubts as well.</p><p>Finally, a thank you to my friends whose support helped me with everything, and to my co-contributor Rushabh Gala for the support as well.</p></div>
<hr/>
<div class="nextra-cards nx-mt-4 nx-gap-4 nx-grid nx-not-prose" style="--rows:3"><a class="nextra-card nx-group nx-flex nx-flex-col nx-justify-start nx-overflow-hidden nx-rounded-lg nx-border nx-border-gray-200 nx-text-current nx-no-underline dark:nx-shadow-none hover:nx-shadow-gray-100 dark:hover:nx-shadow-none nx-shadow-gray-100 active:nx-shadow-sm active:nx-shadow-gray-200 nx-transition-all nx-duration-200 hover:nx-border-gray-300 nx-bg-transparent nx-shadow-sm dark:nx-border-neutral-800 hover:nx-bg-slate-50 hover:nx-shadow-md dark:hover:nx-border-neutral-700 dark:hover:nx-bg-neutral-900" href="/blogs/mnemofs/ba/"><span class="nx-flex nx-font-semibold nx-items-start nx-gap-2 nx-p-4 nx-text-gray-700 hover:nx-text-gray-900 dark:nx-text-neutral-200 dark:hover:nx-text-neutral-50 nx-flex nx-items-center">❰ <!-- -->Mnemofs Block Allocator</span></a><a class="nextra-card nx-group nx-flex nx-flex-col nx-justify-start nx-overflow-hidden nx-rounded-lg nx-border nx-border-gray-200 nx-text-current nx-no-underline dark:nx-shadow-none hover:nx-shadow-gray-100 dark:hover:nx-shadow-none nx-shadow-gray-100 active:nx-shadow-sm active:nx-shadow-gray-200 nx-transition-all nx-duration-200 hover:nx-border-gray-300 nx-bg-transparent nx-shadow-sm dark:nx-border-neutral-800 hover:nx-bg-slate-50 hover:nx-shadow-md dark:hover:nx-border-neutral-700 dark:hover:nx-bg-neutral-900" href="/blogs/mnemofs/endeval/"><span class="nx-flex nx-font-semibold nx-items-start nx-gap-2 nx-p-4 nx-text-gray-700 hover:nx-text-gray-900 dark:nx-text-neutral-200 dark:hover:nx-text-neutral-50 nx-flex nx-items-center">❱ <!-- -->GSoC &#x27;24 @ Apache NuttX, End Evaluation Blog</span></a></div>
<br/>
<a class="nextra-card nx-group nx-flex nx-flex-col nx-justify-start nx-overflow-hidden nx-rounded-lg nx-border nx-border-gray-200 nx-text-current nx-no-underline dark:nx-shadow-none hover:nx-shadow-gray-100 dark:hover:nx-shadow-none nx-shadow-gray-100 active:nx-shadow-sm active:nx-shadow-gray-200 nx-transition-all nx-duration-200 hover:nx-border-gray-300 nx-bg-transparent nx-shadow-sm dark:nx-border-neutral-800 hover:nx-bg-slate-50 hover:nx-shadow-md dark:hover:nx-border-neutral-700 dark:hover:nx-bg-neutral-900" href="/blogs/"><span class="nx-flex nx-font-semibold nx-items-start nx-gap-2 nx-p-4 nx-text-gray-700 hover:nx-text-gray-900 dark:nx-text-neutral-200 dark:hover:nx-text-neutral-50 nx-flex nx-items-center">⌂ <!-- -->Home</span></a><p>MIT 2024 © resyfer.</p></article></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/mnemofs/mideval","query":{},"buildId":"xvVXqBqMjgQ6d2AA5_Hv1","assetPrefix":"/blogs","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>