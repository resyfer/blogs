<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Google Summer of Code &#x27;24 @ Apache NuttX, Mid Term Evaluation Blog</title><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-HFNGDFK1PN"></script><script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag(&#x27;js&#x27;, new Date());

        gtag(&#x27;config&#x27;, &#x27;G-HFNGDFK1PN&#x27;);
        </script><meta name="next-head-count" content="5"/><link rel="preload" href="/blogs/_next/static/css/a0de50ea0cc40a66.css" as="style"/><link rel="stylesheet" href="/blogs/_next/static/css/a0de50ea0cc40a66.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blogs/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/blogs/_next/static/chunks/webpack-b7c95b972d7a52a1.js" defer=""></script><script src="/blogs/_next/static/chunks/framework-a85322f027b40e20.js" defer=""></script><script src="/blogs/_next/static/chunks/main-25a9149b204a716f.js" defer=""></script><script src="/blogs/_next/static/chunks/pages/_app-ae69650375182de2.js" defer=""></script><script src="/blogs/_next/static/chunks/253-8360a865f593540b.js" defer=""></script><script src="/blogs/_next/static/chunks/pages/mnemofs/mideval-dcda5acf9dd15fe2.js" defer=""></script><script src="/blogs/_next/static/mPX4jyn7uvnU3fdX9rLkp/_buildManifest.js" defer=""></script><script src="/blogs/_next/static/mPX4jyn7uvnU3fdX9rLkp/_ssgManifest.js" defer=""></script></head><body><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><article class="nx-container nx-prose max-md:nx-prose-sm dark:nx-prose-dark" dir="ltr"><h1>Google Summer of Code &#x27;24 @ Apache NuttX, Mid Term Evaluation Blog</h1><div class="nx-mb-8 nx-flex nx-gap-3 nx-items-center"><div class="nx-grow dark:nx-text-gray-400 nx-text-gray-600"><div class="nx-not-prose nx-flex nx-flex-wrap nx-items-center nx-gap-1"></div></div><div class="nx-flex nx-items-center nx-gap-3 print:nx-hidden"></div></div>
<p>Hi! I am Saurav Pal, a recent graduate, and a regular passionate developer interested in systems and anything low level, and I welcome you to my blog that covers my journey as a Google Summer of Code (GSoC) Contributor for Apache NuttX in 2024, right from the very start to the very end. My project involves designing and implementing mnemofs, a NAND Flash File System for Apache NuttX.</p>
<div class="nextra-callout nx-overflow-x-auto nx-mt-6 nx-flex nx-rounded-lg nx-border nx-py-2 ltr:nx-pr-4 rtl:nx-pl-4 contrast-more:nx-border-current contrast-more:dark:nx-border-current nx-border-blue-200 nx-bg-blue-100 nx-text-blue-900 dark:nx-border-blue-200/30 dark:nx-bg-blue-900/30 dark:nx-text-blue-200"><div class="nx-select-none nx-text-xl ltr:nx-pl-3 ltr:nx-pr-2 rtl:nx-pr-3 rtl:nx-pl-2" style="font-family:&quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;">‚ÑπÔ∏è</div><div class="nx-w-full nx-min-w-0 nx-leading-7"><p>Disclaimer: Contains a lot of rants and yapping.</p></div></div>
<h2 class="nx-not-prose subheading-h2">Pre-GSoC<a href="#pre-gsoc" id="pre-gsoc" class="subheading-anchor" aria-label="Permalink for this section"></a></h2>
<h3 class="nx-not-prose subheading-h3">Pre-Apache NuttX Period<a href="#pre-apache-nuttx-period" id="pre-apache-nuttx-period" class="subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p>Before the GSoC period, I was looking into Linux, trying to get started as a contributor. But first, I needed to have a fair understanding of how the whole thing works. Baby steps, you know. Read the famous <a href="http://www.doc-developpement-durable.org/file/Projets-informatiques/cours-&amp;-manuels-informatiques/Linux/Linux%20Kernel%20Development,%203rd%20Edition.pdf" target="_blank" rel="noreferrer">Robert Love&#x27;s book<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a>, saw a lot of videos, and of course, tried to read the codebase.</p>
<p>It was overwhelming, and it was stressful, because... I mean, just look at Linux&#x27;s codebase <strong>and</strong> its history. I was also interested in embedded systems, but I was trying to do one thing at a time. While I was going through the codebase, I was hooked on to the history of file systems in the codebase. You could see new file systems appear and some old ones disappear every few versions. Over that, I had heard file systems are the lowest in the whole tree, and are kind of only dependent on the Virtual File System and whatever the storage driver is, and that too that file system developers do not need to worry too much about the storage device (as long as it&#x27;s of the same technology, but I didn&#x27;t know this then), or the internals of the OS.</p>
<p>So, I felt file systems would be a great starting point. Started reading the codebases of the various file systems. After 3-4 file systems, all of them seem to swim in front of my eyes, and feel the same, and concepts from one FS seemed to merge with concepts from another FS ü´†. Still, carried on, as I knew if I try to read it repeatedly, it will start making sense someday. Every line of C makes sense, as mostly nothing is really hidden away, and more so in the case of OS codebases. If it were a higher level language, I would have just probably given up, idk.</p>
<p>I wanted to apply for GSoC once again for 2024, and this time, for a large project (I had done a medium project in 2023). Around this time, I thought of looking into any OS related projects that are available, as those align with my interests. Found Apache NuttX. What does NuttX and the project I found have in common with my interests? Everything! File System + Operating System + Embedded Systems. All my boxes ticked, and a match made in heaven, at least from my side üòâ.</p>
<h3 class="nx-not-prose subheading-h3">First PR<a href="#first-pr" id="first-pr" class="subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p>So, I decided to look into Apache NuttX, and try to understand it. I tried looking into good first issues, but honestly, I was just too optimistic at that point and even the scant few first issues were very advanced for the past me. I could succesfully set up NuttX, and build the simulator configuration (I did not have <strong>any</strong> embedded boards, but more on that later).</p>
<p>I did not wish for hand holding, as it&#x27;s often detrimental to the learning process, but I did wish for a nudge in the right direction. And so I contacted <a href="https://github.com/acassis" target="_blank" rel="noreferrer">Alan<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a> who was listed as a mentor to the project on any kind of resources I could gather. He very generously provided some resources, and suggested I should look into existing FS codebases (like I had done in Linux).</p>
<p>The difference between Linux and NuttX codebases? NuttX codebase looks beautiful. Sure, Linux might look beautiful to the experts, but NuttX looks good even to the newbies like me. A lot of the code is properly documented...each function, what it does, and even sometimes, why it exists.</p>
<p>I looked at the <a href="https://github.com/apache/nuttx/tree/master/fs/fat" target="_blank" rel="noreferrer">FAT file system code<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a>. In and of itself, the code isn&#x27;t too complicated. But NuttX contribution style made a lot of things clear to a someone like me who was mostly stumbling around in the dark, trying to make sense of my surroundings. Finally, while reading the codebase, I came <a href="https://github.com/apache/nuttx/pull/11647" target="_blank" rel="noreferrer">across a bug<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a> that initially I thought was something that I couldn&#x27;t understand the meaning of. After asking around on the mailing list, I found out that this bug went unnoticed because the particular way the macro was used in the codebase till then made the expansion correct, even if the macro itself was incorrect, and might cause problems if the usage of the macro was modified. So, I patched it, and made my first <a href="https://github.com/apache/nuttx/pull/11647" target="_blank" rel="noreferrer">Apache NuttX PR<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a>!</p>
<h3 class="nx-not-prose subheading-h3">More contributions<a href="#more-contributions" id="more-contributions" class="subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p>Alan had mentioned that the FAT file system documentation was a bit lacking and so since I was already looking at the file system, writing it down somewhere would be a good idea, and why not the official documentation :D. So, I researched into FAT FS (or, rather VFAT), and alongside reading the code, I wrote down whatever I learnt, and finally updated the documentation in my <a href="https://github.com/apache/nuttx/pull/11656" target="_blank" rel="noreferrer">second PR<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a>.</p>
<p>Now I wanted to move higher in the OS tree. So, I thought about learning about the VFS. Since this VFS shares a lot with Linux&#x27;s structure, I could apply the VFS resources for Linux here. Along with this, I looked into the codebase, and learnt more about the VFS. Of course, not all of it, but a lot of it. I updated the documentation for the VFS as my <a href="https://github.com/apache/nuttx/pull/11730" target="_blank" rel="noreferrer">third PR<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a>.</p>
<h3 class="nx-not-prose subheading-h3">NAND Flashes<a href="#nand-flashes" id="nand-flashes" class="subheading-anchor" aria-label="Permalink for this section"></a></h3>
<p>Around this time, I had received an ordered STM32F401 board. I had ordered this before my interactions with NuttX community and Alan, and it was just a buy-whatever-feels-popular-and-cheap, and I received it late due to my campus&#x27;s remote location. Suprise! It doesn&#x27;t have the JTAG programmer, and I need to buy one. Another infinite waiting period for that to get delivered.</p>
<p>I was sick of this wait, and wanted to learn about NAND flashes, and thus, about drivers in NuttX. So my thought process went like this: &quot;I am already using the simulator. Why not simulate NAND Flash in it? I have already seen QEMU simulate chips. If CPUs, why not peripherals.&quot; And so, after some headache-filled days, I made my fourth set of PRs (<a href="https://github.com/apache/nuttx/pull/11806" target="_blank" rel="noreferrer">this<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a> and <a href="https://github.com/apache/nuttx-apps/pull/2319" target="_blank" rel="noreferrer">this<span class="nx-sr-only nx-select-none"> (opens in a new tab)</span></a>) to add a NAND Flash virtual device as an app in the simulator.</p>
<p>This made me learn about both NAND Flashes, as well a lot of insight into drivers work in NuttX. Both are very critical for my understanding, if I am to develop a file system for NuttX.</p>
<h3 class="nx-not-prose subheading-h3">Tinkering with my board<a href="#tinkering-with-my-board" id="tinkering-with-my-board" class="subheading-anchor" aria-label="Permalink for this section"></a></h3>
<h3 class="nx-not-prose subheading-h3">mnemofs<a href="#mnemofs" id="mnemofs" class="subheading-anchor" aria-label="Permalink for this section"></a></h3>
<h2 class="nx-not-prose subheading-h2">GSoC Community Bonding Period<a href="#gsoc-community-bonding-period" id="gsoc-community-bonding-period" class="subheading-anchor" aria-label="Permalink for this section"></a></h2>
<h2 class="nx-not-prose subheading-h2">Till Mid Term Evaluation<a href="#till-mid-term-evaluation" id="till-mid-term-evaluation" class="subheading-anchor" aria-label="Permalink for this section"></a></h2>
<hr/>
<div class="nextra-cards nx-mt-4 nx-gap-4 nx-grid nx-not-prose" style="--rows:3"><a class="nextra-card nx-group nx-flex nx-flex-col nx-justify-start nx-overflow-hidden nx-rounded-lg nx-border nx-border-gray-200 nx-text-current nx-no-underline dark:nx-shadow-none hover:nx-shadow-gray-100 dark:hover:nx-shadow-none nx-shadow-gray-100 active:nx-shadow-sm active:nx-shadow-gray-200 nx-transition-all nx-duration-200 hover:nx-border-gray-300 nx-bg-transparent nx-shadow-sm dark:nx-border-neutral-800 hover:nx-bg-slate-50 hover:nx-shadow-md dark:hover:nx-border-neutral-700 dark:hover:nx-bg-neutral-900" href="/blogs/mnemofs/mn/"><span class="nx-flex nx-font-semibold nx-items-start nx-gap-2 nx-p-4 nx-text-gray-700 hover:nx-text-gray-900 dark:nx-text-neutral-200 dark:hover:nx-text-neutral-50 nx-flex nx-items-center">‚ù∞‚ÄÉ<!-- -->Mnemofs Master Node</span></a><a class="nextra-card nx-group nx-flex nx-flex-col nx-justify-start nx-overflow-hidden nx-rounded-lg nx-border nx-border-gray-200 nx-text-current nx-no-underline dark:nx-shadow-none hover:nx-shadow-gray-100 dark:hover:nx-shadow-none nx-shadow-gray-100 active:nx-shadow-sm active:nx-shadow-gray-200 nx-transition-all nx-duration-200 hover:nx-border-gray-300 nx-bg-transparent nx-shadow-sm dark:nx-border-neutral-800 hover:nx-bg-slate-50 hover:nx-shadow-md dark:hover:nx-border-neutral-700 dark:hover:nx-bg-neutral-900" href="/blogs/coming_soon/"><span class="nx-flex nx-font-semibold nx-items-start nx-gap-2 nx-p-4 nx-text-gray-700 hover:nx-text-gray-900 dark:nx-text-neutral-200 dark:hover:nx-text-neutral-50 nx-flex nx-items-center">‚ù±‚ÄÉ<!-- -->GSoC &#x27;24 @ Apache NuttX, End Evaluation Blog</span></a></div>
<br/>
<a class="nextra-card nx-group nx-flex nx-flex-col nx-justify-start nx-overflow-hidden nx-rounded-lg nx-border nx-border-gray-200 nx-text-current nx-no-underline dark:nx-shadow-none hover:nx-shadow-gray-100 dark:hover:nx-shadow-none nx-shadow-gray-100 active:nx-shadow-sm active:nx-shadow-gray-200 nx-transition-all nx-duration-200 hover:nx-border-gray-300 nx-bg-transparent nx-shadow-sm dark:nx-border-neutral-800 hover:nx-bg-slate-50 hover:nx-shadow-md dark:hover:nx-border-neutral-700 dark:hover:nx-bg-neutral-900" href="/blogs/"><span class="nx-flex nx-font-semibold nx-items-start nx-gap-2 nx-p-4 nx-text-gray-700 hover:nx-text-gray-900 dark:nx-text-neutral-200 dark:hover:nx-text-neutral-50 nx-flex nx-items-center">‚åÇ‚ÄÉ<!-- -->Home</span></a><p>MIT 2024 ¬© resyfer.</p></article></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/mnemofs/mideval","query":{},"buildId":"mPX4jyn7uvnU3fdX9rLkp","assetPrefix":"/blogs","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>